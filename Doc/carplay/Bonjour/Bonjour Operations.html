<!DOCTYPE html>
<!-- saved from url=(0157)https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-SW1 -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Bonjour Operations</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    
    <meta id="book-resource-type" name="book-resource-type" content="Guide">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/10000119i">
    <meta id="document-version" name="document-version" content="5.6.0">
    <meta id="build" name="build" content="a2fc0b0a378f71393fc369bffd1f2b5d">
    <meta id="chapterId" name="chapterId" content="20001074">
    <meta id="date" name="date" content="2013-04-23">
    <meta id="description" name="description" content="Explains how to use Apple&#39;s zero-configuration networking architecture in Cocoa applications.">
    <meta id="book-title" name="book-title" content="Bonjour Overview">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Guides and Sample Code">
    <meta id="book-assignments" name="book-assignments" content="{Type/Guide}, {Topic/Networking, Internet, &amp; Web/Services &amp; Discovery}">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2017 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Bonjour Overview: Bonjour Operations">
    <meta id="resources-uri" name="resources-uri" content="../../../../../Resources/1274">
    <link id="book-index-page" rel="Start" title="Bonjour Overview" type="text/html" href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/index.html">
    <link id="next-page" rel="Next" type="text/html" href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html">
    <link id="previous-page" rel="Prev" type="text/html" href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/programming.html">
    <link rel="stylesheet" type="text/css" href="./Bonjour Operations_files/screen.css">
    
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="./Bonjour Operations_files/feedback.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta id="platforms" name="platforms" content="">
</head>    
<body class="isShowingTOC" id=""><a name="//apple_ref/doc/uid/20001074" title="Bonjour Operations"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
    </script>

    <script type="text/javascript" src="./Bonjour Operations_files/s_code_h.js"></script>
    <script type="text/javascript">
    s.pageName=AC.Tracking.pageName();
    s.channel="www.us.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>

    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id="ssi_Header" class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href="https://developer.apple.com/library/content/navigation/" onclick="s_objectID=&quot;https://developer.apple.com/library/content/navigation/_1&quot;;return this.s_oc?this.s_oc(e):true">Guides and Sample Code</a>
            <a id="ssi_AppleDeveloperConnection" href="https://developer.apple.com/" onclick="s_objectID=&quot;https://developer.apple.com/_1&quot;;return this.s_oc?this.s_oc(e):true">Developer</a>
            <div id="ssi_SearchButton" role="button" title="Search">Search</div>
        </div>
        <form id="ssi_SearchMenu" method="get" action="https://developer.apple.com/library/content/search/" accept-charset="utf-8">
            <label for="adcsearch">Search Guides and Sample Code</label>
            
            
    
            <input type="search" id="ssi_SearchField" name="q" accesskey="s" results="5">
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Bonjour Overview</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex="4" rel="alternate" title="Download PDF" class=""><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex="3" title="Download Companion File" class=""><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To…</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7" class="isShowingTOC">
        <ul id="toc" role="tree"><li class=" " data-aref="//apple_ref/doc/uid/TP40002445-SW1"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Introduction.html#//apple_ref/doc/uid/TP40002445-SW1">Introduction</a></span></li><li class="children " data-aref="//apple_ref/doc/uid/TP40002458-SW1" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-SW1">Bonjour Concepts</a></span><ul><li class="children " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF107" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF107">Why Bonjour?</a></span><ul><li class=" " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF108"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF108">Zero Configuration: An Example</a></span></li></ul></li><li class="children " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF109" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF109">What Is Bonjour?</a></span><ul><li class=" " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF110"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF110">Addressing</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002458-BBCJFDFF"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-BBCJFDFF">Naming</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF111"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF111">Service Discovery</a></span></li></ul></li><li class="children " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF112" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF112">How Bonjour Reduces Overhead</a></span><ul><li class=" " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF113"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF113">Caching</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF114"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF114">Suppression of Duplicate Responses</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002458-TPXREF115"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/about.html#//apple_ref/doc/uid/TP40002458-TPXREF115">Exponential Back-off and Service Announcement</a></span></li></ul></li></ul></li><li class="children " data-aref="//apple_ref/doc/uid/TP40002460-SW1" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-SW1">Domain Naming Conventions</a></span><ul><li class=" " data-aref="//apple_ref/doc/uid/TP40002460-TPXREF117"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-TPXREF117">Domain Names and DNS</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002460-CJBDIAHA"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-CJBDIAHA">Bonjour and the Local Link</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002460-SW4"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-SW4">Bonjour and Unicast DNS</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002460-TPXREF118"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-TPXREF118">Bonjour Names for Existing Service Types</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002460-TPXREF119"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-TPXREF119">Bonjour Names for New Services</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002460-TPXREF120"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-TPXREF120">Bonjour Names for Service Instances</a></span></li></ul></li><li class="children " data-aref="//apple_ref/doc/uid/TP40002459-SW1" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/programming.html#//apple_ref/doc/uid/TP40002459-SW1">Bonjour API Architecture</a></span><ul><li class=" " data-aref="//apple_ref/doc/uid/TP40002459-SW3"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/programming.html#//apple_ref/doc/uid/TP40002459-SW3">NSNetService and NSNetServiceBrowser</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002459-SW4"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/programming.html#//apple_ref/doc/uid/TP40002459-SW4">CFNetServices</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40002459-SW5"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/programming.html#//apple_ref/doc/uid/TP40002459-SW5">DNS Service Discovery</a></span></li></ul></li><li class="children " data-aref="//apple_ref/doc/uid/20001074-SW1" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-SW1">Bonjour Operations</a></span><ul><li class=" " data-aref="//apple_ref/doc/uid/20001074-96838"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-96838">Architectural Overview</a></span></li><li class="children " data-aref="//apple_ref/doc/uid/20001074-96877" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-96877">Publication</a></span><ul><li class=" " data-aref="//apple_ref/doc/uid/20001074-98664"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-98664">Service Records</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/20001074-98782"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-98782">Pointer Records</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/20001074-100100"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-100100">Text Records</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/20001074-98854"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-98854">Publication: An Example</a></span></li></ul></li><li class=" " data-aref="//apple_ref/doc/uid/20001074-100824"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-100824">Discovery</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/20001074-96895"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#//apple_ref/doc/uid/20001074-96895">Resolution</a></span></li></ul></li><li class="children " data-aref="//apple_ref/doc/uid/TP40008762-SW1" role="treeitem"><span class="disclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW1">Appendix A: Bonjour - Frequently Asked Questions</a></span><ul><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW2"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW2">1. What is Bonjour?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW3"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW3">2. What is mDNSResponder?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW4"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW4">3. Does Bonjour work between multiple subnets?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW14"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW14">4. When I disconnect a device from a network, does it remain visible?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW15"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW15">5. What do I have to do to support Bonjour over Bluetooth in iOS?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW16"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW16">6. How long should I leave service browsers running?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW5"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW5">7. Does Bonjour support "SOAP" RPC over HTTP?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW6"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW6">8. Does Bonjour have any kind of subscription or notification mechanism?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW7"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW7">9. What should I pass in for the "name" parameter when registering a service?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW8"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW8">10. What should I pass in for the "type" parameter when registering a service?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW9"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW9">11. What should I pass in for the "domain" parameter when registering a service?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW10"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW10">12. What should happen when two devices on the network both use the same service name?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW11"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW11">13. What is the TXT record used for?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW12"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW12">14. After the user browses the network in my application and selects the service instance they wish to use, I should save that IP address in my application's preference file, right?</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP40008762-SW13"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html#//apple_ref/doc/uid/TP40008762-SW13">15. My hardware device has a built-in web server used for configuration. Should I register it using Bonjour?</a></span></li></ul></li><li class=" " data-aref="//apple_ref/doc/uid/20001610-CJBGIAGF"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/RevisionHistory.html#//apple_ref/doc/uid/20001610-CJBGIAGF">Revision History</a></span></li><ul id="TOC_relatedBooks_0" class="related"><h3>RELATED DOCUMENTS</h3><li class=" " data-aref="//apple_ref/doc/uid/TP40002736"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Networking/Conceptual/NSNetServiceProgGuide/Introduction.html#//apple_ref/doc/uid/TP40002736">NSNetServices and CFNetServices Programming Guide</a></span></li><li class=" " data-aref="//apple_ref/doc/uid/TP30000964"><span class="nodisclosure"></span><span class="sectionName"><a href="https://developer.apple.com/library/content/documentation/Networking/Conceptual/dns_discovery_api/Introduction.html#//apple_ref/doc/uid/TP30000964">DNS Service Discovery Programming Guide</a></span></li></ul></ul>
    </nav>

    <article id="contents" tabindex="0" role="main" class="isShowingTOC">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class="nextLink" rel="next" href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html" onclick="s_objectID=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/f_1&quot;;return this.s_oc?this.s_oc(e):true">Next</a><a class="previousLink" rel="prev" href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/programming.html" onclick="s_objectID=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/p_1&quot;;return this.s_oc?this.s_oc(e):true">Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/index.html" style="display:none;" onclick="s_objectID=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/index.html_1&quot;;return this.s_oc?this.s_oc(e):true"></a>
        
        <a name="//apple_ref/doc/uid/20001074-SW1" title="Bonjour Operations"></a><h1 id="pageTitle"><a name="//apple_ref/doc/uid/20001074-BAJIDHHC" title="Bonjour Operations"></a>Bonjour Operations</h1><p>This chapter describes the Bonjour operations of service publication, browsing, and resolution that underlay the three network service API layers, and the API layers themselves. You should read this chapter if you want to write an application or tool that publishes or discovers network services.</p><section><a name="//apple_ref/doc/uid/20001074-96838" title="Architectural Overview"></a><h2 class="jump">Architectural Overview</h2><p>The network services architecture in Bonjour includes an easy-to-use mechanism for publishing, discovering, and using IP-based services. Bonjour supports three fundamental operations, each of which is a necessary part of zero-configuration network services:</p><ul class="ul"><li class="li"><p>Publication (advertising a service)</p></li><li class="li"><p>Discovery (browsing for available services)</p></li><li class="li"><p>Resolution (translating service instance names to addresses and port numbers for use)</p></li></ul><p>These operations are discussed in detail in the following sections.</p></section><section><a name="//apple_ref/doc/uid/20001074-96877" title="Publication"></a><h2 class="jump">Publication</h2><p>To publish a service, an application or device must register the service with a Multicast DNS responder, either through a high-level API or by communicating directly with the responder (<code>mDNSResponder</code>). Bonjour also supports storing records on conventional DNS servers as well, using Dynamic DNS Update.</p><p>When a service is registered, three related DNS records are created: a service (SRV) record, a pointer (PTR) record, and a text (TXT) record. The TXT record contains additional data needed to resolve or use the service, although it is also often empty.</p><section><a name="//apple_ref/doc/uid/20001074-98664" title="Service Records"></a><h3 class="jump">Service Records</h3><p>The SRV record maps the name of the service instance to the information needed by a client to actually use the service. Clients then store the service instance name as a persistent way to access the service, and perform a DNS query for the host name and port number when it’s time to connect. This additional level of indirection provides for two important features. First, the service is identified by a human-readable name instead of a domain name and port number. Second, clients can access the service even if its port number, IP address, or host name changes, as long as the service name remains the same.</p><p>The SRV record contains two pieces of information to identify a service:</p><ul class="ul"><li class="li"><p>Host name</p></li><li class="li"><p>Port number</p></li></ul><p>The host name is the domain name where the service can currently be found. The reason a host name is given instead of a single IP address is that it could be a multi-homed host with more than one IP address, or it could have IPv6 addresses as well as IPv4 addresses, and so on. Identifying the host by name allows all these cases to be handled gracefully.</p><p>The port number identifies the UDP or TCP port for the service.</p><p>SRV records are named according to the following convention:</p><p><code>&lt;Instance Name&gt;.&lt;Service Type&gt;.&lt;Domain&gt;</code></p><p><code>&lt;Instance Name&gt;</code>, the name of a service instance, can be any UTF-8-encoded Unicode string, and is intended to be human readable.</p><p><code>&lt;Service Type&gt;</code> is a standard IP protocol name, preceded by an underscore, followed by the host-to-host transport protocol (TCP or UDP), also preceded by an underscore. For example, a Trivial FTP service running over UDP would have a service type of <code>_tftp._udp</code>, and an IPP printing service running over TCP would register under the <code>_ipp._tcp</code> service type. The list of official protocol names is maintained by IANA; see <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-SW1" data-renderer-version="1" onclick="s_objectID=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/d_1&quot;;return this.s_oc?this.s_oc(e):true">Domain Naming Conventions</a></span> for more information.</p><p><code>&lt;Domain&gt;</code> is a standard DNS domain. This may be a specific domain, such as <code>apple.com.</code>, or the generic suffix <code>local.</code> for a service accessible only on the local link.</p><p>Here is an example of the SRV record (in the standard DNS record format) for a print spooler named <code>PrintsAlot</code> running on TCP port <code>515</code>:</p><p><code>PrintsAlot._printer._tcp.local. 120 IN SRV 0 0 515 blackhawk.local.</code></p><p>This record would be created on the Multicast DNS responder of a printer called <code>blackhawk.local.</code> on the local link. The initial <code>120</code> represents the time-to-live (TTL) value which is used for caching. The two zeros are weight and priority values, used in traditional DNS when choosing between multiple records that match a given name; for multicast DNS purposes, these values are ignored.</p><p>For more information about domain, service, and instance names, see <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html#//apple_ref/doc/uid/TP40002460-SW1" data-renderer-version="1" onclick="s_objectID=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/d_2&quot;;return this.s_oc?this.s_oc(e):true">Domain Naming Conventions</a></span>.</p></section><section><a name="//apple_ref/doc/uid/20001074-98782" title="Pointer Records"></a><h3 class="jump">Pointer Records</h3><p>PTR records enable service discovery by mapping the type of the service to a list of names of specific instances of that type of service. This record adds yet another layer of indirection so services can be found just by looking up PTR records labeled with the service type.</p><p>The record contains just one piece of information, the name of the service instance (which is the same as the name of the SRV record). PTR records are accordingly named just like SRV records but without the instance name:</p><p><code>&lt;Service Type&gt;.&lt;Domain&gt;</code></p><p>Here is an example of a PTR record for a print spooler named <code>PrintsAlot</code>:</p><p><code>_printer._tcp.local. 28800 PTR PrintsAlot._printer._tcp.local.</code></p><p>Again, the <code>28800</code> is the time-to-live (TTL) value, measured in seconds.</p></section><section><a name="//apple_ref/doc/uid/20001074-100100" title="Text Records"></a><h3 class="jump">Text Records</h3><p>The TXT record has the same name as the corresponding SRV record, and can contain a small amount of additional information about the service instance, typically no more than 100–200 bytes at most. This record may also be empty. For example, a network game could advertise the name of the map being used in a multiplayer game, and a chat program could advertise the availability of the user (for example, idle, away, or available). If you need to transmit larger amounts of data, the host should establish a connection with the client and send the data directly.</p><p>Historically, this record has been used for multiple services running on the same port at the same IP address, for example multiple print queues running on the same print server. In this case additional information in the TXT record can be used to identify the intended print queue, as shown in this example:</p><a name="//apple_ref/doc/uid/20001074-100254" title="Table 4-1Using TXT records for demultiplexing"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 4-1</strong>&nbsp;&nbsp;Using TXT records for demultiplexing</caption><tbody><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Service name</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>IP address</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Port</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Queue name (from TXT record)</p></th></tr><tr><td scope="row"><p><code>Paper Printer</code></p></td><td><p><code>_ipp._tcp</code></p></td><td><p><code></code><code>10.0.0.2</code></p></td><td><p><code>631</code></p></td><td><p><code>rp=lpt1</code></p></td></tr><tr><td scope="row"><p><code>Slide Printer</code></p></td><td><p><code>_ipp._tcp</code></p></td><td><p><code>10.0.0.2</code></p></td><td><p><code>631</code></p></td><td><p><code>rp=lpt2</code></p></td></tr></tbody></table></div><p>This kind of practice was necessary because service types have historically been associated with well known ports. Designers of new Bonjour protocols are encouraged to run each instance of their service on a different dynamically allocated port number, instead of trying to run them all on the same well known port number and using extra information to specify which instance the client is trying to talk to.</p><p>The nature and format of the data in the TXT record are specific to each type of service, so each new service type needs to also define the format of data for its associated TXT record (if any), and publish this format as part of the protocol specification.</p></section><section><a name="//apple_ref/doc/uid/20001074-98854" title="Publication: An Example"></a><h3 class="jump">Publication: An Example</h3><p>For a concrete example, consider a hypothetical device that shares music over a local network—an IP-enabled jukebox. Suppose that its transport protocol is TCP and its application protocol goes by the name <code>music</code>. When someone plugs the device into an Ethernet hub, a number of things happen, as shown in <span class="content_text">Figure 4-1</span>.</p><p>In step 1, the device randomly selects the link-local IP address <code>169.254.150.84</code>, randomly selected from the IPv4 link-local range <code>169.254.0.0</code> with a subnet mask of <code>255.255.0.0</code>, and announces it to the network. Because no devices respond to the announcement, the device takes the address as its own. In step 2, it starts up its own Multicast DNS responder, requests the host name <code>eds-musicbox.local.</code>, verifies its availability, and takes the name as its own. Next, in step 3, the device starts up a music sharing service on TCP port <code>1010</code>. Finally, in step 4, it publishes the service, of type <code>_music._tcp</code>, under the name <code>Ed’s Party Mix</code>, in the <code>local.</code> domain, first making sure that no service exists under the same name. This creates two records:</p><ul class="ul"><li class="li"><p>An SRV record named <code>Ed’s Party Mix._music._tcp.local.</code> that points to <code>eds-musicbox.local.</code> on TCP port <code>1010</code></p></li><li class="li"><p>A PTR record named <code>_music._tcp.local.</code> that points to the <code>Ed’s Party Mix._music._tcp.local.</code> service.</p></li></ul><figure class="figure"><a name="//apple_ref/doc/uid/20001074-100716-BAJGADEC" title="Figure 4-1Publishing a music sharing service"></a><figcaption><a name="//apple_ref/doc/uid/20001074-100716" title="Figure 4-1Publishing a music sharing service"></a><strong class="caption_number">Figure 4-1</strong>&nbsp;&nbsp;Publishing a music sharing service</figcaption><img src="./Bonjour Operations_files/rendarch_01publish_2x.png" alt="" width="494" height="641"></figure><div class="notebox"><aside><a name="//apple_ref/doc/uid/20001074-SW2" title="Note"></a><p><strong>Note:</strong>&nbsp;When publishing a service, if the domain name or service name is unavailable, a device without an interface should choose a new name. Application software encountering this situation should present a user interface informing the user that the name is unavailable, and should allow the user to choose a different name.</p><p></p></aside></div></section></section><section><a name="//apple_ref/doc/uid/20001074-100824" title="Discovery"></a><h2 class="jump">Discovery</h2><p>Service discovery makes use of the DNS records registered during service publication to find all named instances of a particular type of service. To do this, an application performs a query for PTR records matching a service type, such as <code>_http._tcp</code>, usually through a higher-level API. The Multicast DNS responders running on each device return PTR records with service instance names.</p><figure class="figure"><a name="//apple_ref/doc/uid/20001074-100874-BAJDCJFE" title="Figure 4-2Discovering music sharing services"></a><figcaption><a name="//apple_ref/doc/uid/20001074-100874" title="Figure 4-2Discovering music sharing services"></a><strong class="caption_number">Figure 4-2</strong>&nbsp;&nbsp;Discovering music sharing services</figcaption><img src="./Bonjour Operations_files/rendarch_02discover_2x.png" class="wide-image" alt="" width="761" height="510"><img src="./Bonjour Operations_files/rendarch_02discover_2x.png" class="ipad-scaled-image" alt="" width="670" height="449"></figure><p><span class="content_text">Figure 4-2</span> illustrates a client application browsing for music sharing services. In step 1, the client application issues a query for services of type <code>_music._tcp</code><code></code> in the <code>local.</code> domain to the standard multicast address <code>224.0.0.251</code><code></code>. Every Multicast DNS responder on the network hears the request, but only the music sharing device responds with a PTR record (step 2). The resulting PTR record holds the service instance name, <code>Ed's Party Mix._music._tcp.local.</code> in this case. The client app can then extract the service instance name from the PTR record and add it to an onscreen list of music servers.</p></section><section><a name="//apple_ref/doc/uid/20001074-96895" title="Resolution"></a><h2 class="jump">Resolution</h2><p>Service discovery typically takes place only once in a while—for example, when a user first selects a printer. This operation saves the service instance name, the intended stable identifier for any given instance of a service. Port numbers, IP addresses, and even host names can change from day to day, but a user should not need to reselect a printer every time this happens. Accordingly, resolution from a service name to socket information does not happen until the service is actually used.</p><p>To resolve a service, an application performs a DNS lookup for a SRV record with the name of the service. The Multicast DNS responder responds with the SRV record containing the current information.</p><p><span class="content_text">Figure 4-3</span> illustrates service resolution in the music sharing example. The resolution process begins with a DNS query to the multicast address <code>224.0.0.251</code> asking for the <code>Ed’s Party Mix._music._tcp.local.</code> SRV record (step 1). In step 2, this query returns the service’s host name and port number (<code>eds-musicbox.local.</code>, <code>1010</code>). In step 3, the client sends out a multicast request for the IP address. In step 4, this request resolves to the IP address <code>169.254.150.84</code>. Then the client can use the IP address and port number to connect to the service. This process takes place each time the service is used, thereby always finding the service’s most current address and port number.</p><figure class="figure"><a name="//apple_ref/doc/uid/20001074-98013-BAJDGBAC" title="Figure 4-3Resolving a music sharing service instance"></a><figcaption><a name="//apple_ref/doc/uid/20001074-98013" title="Figure 4-3Resolving a music sharing service instance"></a><strong class="caption_number">Figure 4-3</strong>&nbsp;&nbsp;Resolving a music sharing service instance</figcaption><img src="./Bonjour Operations_files/rendarch_03resolve_2x.png" class="wide-image" alt="" width="765" height="1053"><img src="./Bonjour Operations_files/rendarch_03resolve_2x.png" class="ipad-scaled-image" alt="" width="670" height="922"></figure></section>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class="nextLink" rel="next" href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/faq.html" onclick="s_objectID=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/f_2&quot;;return this.s_oc?this.s_oc(e):true">Next</a><a class="previousLink" rel="prev" href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/programming.html" onclick="s_objectID=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/p_2&quot;;return this.s_oc?this.s_oc(e):true">Previous</a>
        </div><br>
        <div class="copyright"><br><hr><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright © 2013 Apple Inc. All Rights Reserved.  <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank" onclick="s_objectID=&quot;http://www.apple.com/legal/internet-services/terms/site.html_1&quot;;return this.s_oc?this.s_oc(e):true">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank" onclick="s_objectID=&quot;http://www.apple.com/privacy/_1&quot;;return this.s_oc?this.s_oc(e):true">Privacy Policy</a>  |  Updated: 2013-04-23</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback…</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We’re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NetServices/Articles/NetServicesArchitecture.html#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1"> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2"> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3"> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo"> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect"> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples"> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art"> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo"> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required=""></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send">

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank" onclick="s_objectID=&quot;https://developer.apple.com/bugreporter/_1&quot;;return this.s_oc?this.s_oc(e):true">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank" onclick="s_objectID=&quot;http://www.apple.com/legal/policies/ideas.html_1&quot;;return this.s_oc?this.s_oc(e):true">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="./Bonjour Operations_files/prototype.js"></script>
    <script src="./Bonjour Operations_files/library.js"></script>
    <script src="./Bonjour Operations_files/feedback.js"></script>


</body></html>